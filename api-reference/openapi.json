{
  "openapi": "3.1.0",
  "info": {
    "title": "Timely AI | API v1",
    "description": "API v1 do Timely AI para agentes, conversas, agendamentos, follow-ups, treinamentos e workspaces.",
    "version": "1.0.0",
    "license": {
      "name": "MIT"
    }
  },
  "servers": [
    {
      "url": "https://juiywycqytekaffjcbfa.supabase.co/functions/v1/api-v1"
    }
  ],
  "security": [
    {
      "ApiKeyAuth": []
    }
  ],
  "tags": [
    {
      "name": "Agents",
      "description": "Gerenciamento de agentes de IA"
    },
    {
      "name": "Conversations",
      "description": "Gerenciamento de conversas e mensagens"
    },
    {
      "name": "Appointments",
      "description": "Gerenciamento de agendamentos"
    },
    {
      "name": "Follow-ups",
      "description": "Automação de follow-ups"
    },
    {
      "name": "Training",
      "description": "Treinamento da base de conhecimento"
    },
    {
      "name": "Workspaces",
      "description": "Gerenciamento de workspaces, permissões e configurações"
    },
    {
      "name": "Credits",
      "description": "Gerenciamento de créditos"
    }
  ],
  "paths": {
    "/health": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Health check",
        "responses": {
          "200": {
            "description": "Sistema online",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Health"
                }
              }
            }
          }
        }
      }
    },
    "/agents": {
      "get": {
        "tags": [
          "Agents"
        ],
        "summary": "Listar agentes",
        "parameters": [
          {
            "$ref": "#/components/parameters/Page"
          },
          {
            "$ref": "#/components/parameters/Limit"
          },
          {
            "$ref": "#/components/parameters/Sort"
          },
          {
            "$ref": "#/components/parameters/Order"
          },
          {
            "name": "is_active",
            "in": "query",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "workflow_type",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de agentes",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentsListResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Agents"
        ],
        "summary": "Criar agente",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AgentCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Agente criado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentResponse"
                }
              }
            }
          }
        }
      }
    },
    "/agents/{id}": {
      "get": {
        "tags": [
          "Agents"
        ],
        "summary": "Obter agente",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Detalhes do agente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Agents"
        ],
        "summary": "Atualizar agente",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AgentUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Agente atualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Agents"
        ],
        "summary": "Remover agente",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Agente removido",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/agent/{id}/inactive": {
      "put": {
        "tags": [
          "Agents"
        ],
        "summary": "Inativar agente",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Agente inativado"
          }
        }
      }
    },
    "/agent/{id}/active": {
      "put": {
        "tags": [
          "Agents"
        ],
        "summary": "Ativar agente",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Agente ativado"
          }
        }
      }
    },
    "/workspace/{workspaceId}/agents": {
      "get": {
        "tags": [
          "Agents"
        ],
        "summary": "Listar agentes por workspace",
        "parameters": [
          {
            "name": "workspaceId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/Page"
          },
          {
            "$ref": "#/components/parameters/Limit"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de agentes",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentsListResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Agents"
        ],
        "summary": "Criar agente em workspace",
        "parameters": [
          {
            "name": "workspaceId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AgentCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Agente criado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentResponse"
                }
              }
            }
          }
        }
      }
    },
    "/agent/{id}/settings": {
      "get": {
        "tags": [
          "Agents"
        ],
        "summary": "Obter configurações do agente",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Configurações do agente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Agents"
        ],
        "summary": "Atualizar configurações do agente",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Configurações atualizadas",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/agent/{id}/conversation": {
      "post": {
        "tags": [
          "Agents"
        ],
        "summary": "Conversar com agente (Simulação)",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "input": {
                    "type": "string"
                  },
                  "conversation_id": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Resposta do agente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "reply": {
                      "type": "string"
                    },
                    "conversation_id": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/agent/{id}/add-message": {
      "post": {
        "tags": [
          "Agents"
        ],
        "summary": "Adicionar mensagem manualmente",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "content": {
                    "type": "string"
                  },
                  "role": {
                    "type": "string",
                    "enum": [
                      "ai",
                      "customer"
                    ]
                  },
                  "conversation_id": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Mensagem adicionada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                }
              }
            }
          }
        }
      }
    },
    "/agent/{id}/trainings": {
      "get": {
        "tags": [
          "Training"
        ],
        "summary": "Listar treinamentos do agente",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de treinamentos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Training"
        ],
        "summary": "Adicionar treinamento ao agente",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Treinamento adicionado"
          }
        }
      }
    },
    "/training/{id}": {
      "put": {
        "tags": [
          "Training"
        ],
        "summary": "Atualizar treinamento",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Treinamento atualizado"
          }
        }
      },
      "delete": {
        "tags": [
          "Training"
        ],
        "summary": "Remover treinamento",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Treinamento removido"
          }
        }
      }
    },
    "/training/documents": {
      "get": {
        "tags": [
          "Training"
        ],
        "summary": "Listar documentos de treinamento",
        "responses": {
          "200": {
            "description": "Lista de documentos"
          }
        }
      },
      "post": {
        "tags": [
          "Training"
        ],
        "summary": "Criar documento de treinamento",
        "responses": {
          "201": {
            "description": "Documento criado"
          }
        }
      }
    },
    "/training/documents/{id}": {
      "delete": {
        "tags": [
          "Training"
        ],
        "summary": "Remover documento",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Documento removido"
          }
        }
      }
    },
    "/training/qa": {
      "get": {
        "tags": [
          "Training"
        ],
        "summary": "Listar Q&A",
        "responses": {
          "200": {
            "description": "Lista de Q&A"
          }
        }
      },
      "post": {
        "tags": [
          "Training"
        ],
        "summary": "Criar Q&A",
        "responses": {
          "201": {
            "description": "Q&A criado"
          }
        }
      }
    },
    "/training/qa/{id}": {
      "put": {
        "tags": [
          "Training"
        ],
        "summary": "Atualizar Q&A",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Q&A atualizado"
          }
        }
      },
      "delete": {
        "tags": [
          "Training"
        ],
        "summary": "Remover Q&A",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Q&A removido"
          }
        }
      }
    },
    "/training/text": {
      "get": {
        "tags": [
          "Training"
        ],
        "summary": "Listar textos de treinamento",
        "responses": {
          "200": {
            "description": "Lista de textos"
          }
        }
      },
      "post": {
        "tags": [
          "Training"
        ],
        "summary": "Criar texto de treinamento",
        "responses": {
          "201": {
            "description": "Texto criado"
          }
        }
      }
    },
    "/training/text/{id}": {
      "put": {
        "tags": [
          "Training"
        ],
        "summary": "Atualizar texto",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Texto atualizado"
          }
        }
      },
      "delete": {
        "tags": [
          "Training"
        ],
        "summary": "Remover texto",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Texto removido"
          }
        }
      }
    },
    "/training/stats": {
      "get": {
        "tags": [
          "Training"
        ],
        "summary": "Estatísticas de treinamento",
        "responses": {
          "200": {
            "description": "Estatísticas"
          }
        }
      }
    },
    "/conversations": {
      "get": {
        "tags": [
          "Conversations"
        ],
        "summary": "Listar conversas",
        "parameters": [
          {
            "$ref": "#/components/parameters/Page"
          },
          {
            "$ref": "#/components/parameters/Limit"
          },
          {
            "name": "channel",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de conversas",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationsListResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Conversations"
        ],
        "summary": "Criar conversa",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConversationCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Conversa criada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationResponse"
                }
              }
            }
          }
        }
      }
    },
    "/conversations/{id}": {
      "get": {
        "tags": [
          "Conversations"
        ],
        "summary": "Obter conversa",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          },
          {
            "name": "include_messages",
            "in": "query",
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Detalhes da conversa",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Conversations"
        ],
        "summary": "Atualizar conversa",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConversationUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Conversa atualizada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationResponse"
                }
              }
            }
          }
        }
      }
    },
    "/conversations/{id}/messages": {
      "get": {
        "tags": [
          "Conversations"
        ],
        "summary": "Listar mensagens",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          },
          {
            "$ref": "#/components/parameters/Page"
          },
          {
            "$ref": "#/components/parameters/Limit"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de mensagens",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessagesListResponse"
                }
              }
            }
          }
        }
      }
    },
    "/conversations/{id}/pause": {
      "put": {
        "tags": [
          "Conversations"
        ],
        "summary": "Pausar/Retomar IA",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "paused": {
                    "type": "boolean"
                  },
                  "pause_minutes": {
                    "type": "integer"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status atualizado"
          }
        }
      }
    },
    "/conversations/stats": {
      "get": {
        "tags": [
          "Conversations"
        ],
        "summary": "Estatísticas de conversas",
        "responses": {
          "200": {
            "description": "Estatísticas"
          }
        }
      }
    },
    "/appointments": {
      "get": {
        "tags": [
          "Appointments"
        ],
        "summary": "Listar agendamentos",
        "parameters": [
          {
            "$ref": "#/components/parameters/Page"
          },
          {
            "$ref": "#/components/parameters/Limit"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de agendamentos",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AppointmentsListResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Appointments"
        ],
        "summary": "Criar agendamento",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AppointmentCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Agendamento criado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AppointmentResponse"
                }
              }
            }
          }
        }
      }
    },
    "/appointments/{id}": {
      "get": {
        "tags": [
          "Appointments"
        ],
        "summary": "Obter agendamento",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Detalhes do agendamento",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AppointmentResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Appointments"
        ],
        "summary": "Atualizar agendamento",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AppointmentUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Agendamento atualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AppointmentResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Appointments"
        ],
        "summary": "Cancelar agendamento",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Agendamento cancelado"
          }
        }
      }
    },
    "/appointments/{id}/status": {
      "put": {
        "tags": [
          "Appointments"
        ],
        "summary": "Atualizar status do agendamento",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status atualizado"
          }
        }
      }
    },
    "/appointments/calendar": {
      "get": {
        "tags": [
          "Appointments"
        ],
        "summary": "Calendário de agendamentos",
        "responses": {
          "200": {
            "description": "Dados do calendário"
          }
        }
      }
    },
    "/appointments/stats": {
      "get": {
        "tags": [
          "Appointments"
        ],
        "summary": "Estatísticas de agendamentos",
        "responses": {
          "200": {
            "description": "Estatísticas"
          }
        }
      }
    },
    "/followups": {
      "get": {
        "tags": [
          "Follow-ups"
        ],
        "summary": "Listar follow-ups",
        "parameters": [
          {
            "$ref": "#/components/parameters/Page"
          },
          {
            "$ref": "#/components/parameters/Limit"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de follow-ups"
          }
        }
      }
    },
    "/followups/scheduled": {
      "get": {
        "tags": [
          "Follow-ups"
        ],
        "summary": "Listar follow-ups agendados",
        "responses": {
          "200": {
            "description": "Lista de follow-ups agendados"
          }
        }
      }
    },
    "/followups/automation": {
      "post": {
        "tags": [
          "Follow-ups"
        ],
        "summary": "Criar automação de follow-up",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Automação criada"
          }
        }
      }
    },
    "/followups/automation/{id}": {
      "get": {
        "tags": [
          "Follow-ups"
        ],
        "summary": "Obter automação",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Detalhes da automação"
          }
        }
      },
      "put": {
        "tags": [
          "Follow-ups"
        ],
        "summary": "Atualizar automação",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Automação atualizada"
          }
        }
      },
      "delete": {
        "tags": [
          "Follow-ups"
        ],
        "summary": "Remover automação",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Automação removida"
          }
        }
      }
    },
    "/followups/trigger": {
      "post": {
        "tags": [
          "Follow-ups"
        ],
        "summary": "Disparar follow-up manual",
        "responses": {
          "201": {
            "description": "Follow-up disparado"
          }
        }
      }
    },
    "/followups/stats": {
      "get": {
        "tags": [
          "Follow-ups"
        ],
        "summary": "Estatísticas de follow-ups",
        "responses": {
          "200": {
            "description": "Estatísticas"
          }
        }
      }
    },
    "/workspaces": {
      "get": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Listar workspaces",
        "responses": {
          "200": {
            "description": "Lista de workspaces",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkspacesListResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Criar workspace",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Workspace criado"
          }
        }
      }
    },
    "/workspaces/{id}": {
      "get": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Obter workspace",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Detalhes do workspace",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkspaceMinimalResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Atualizar workspace",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Workspace atualizado"
          }
        }
      },
      "delete": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Remover workspace",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Workspace removido"
          }
        }
      }
    },
    "/workspaces/{id}/members": {
      "get": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Listar membros do workspace",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de membros"
          }
        }
      },
      "post": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Adicionar membro ao workspace",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "201": {
            "description": "Membro adicionado"
          }
        }
      }
    },
    "/workspaces/{id}/members/{memberId}": {
      "put": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Atualizar membro do workspace",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          },
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Membro atualizado"
          }
        }
      },
      "delete": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Remover membro do workspace",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          },
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Membro removido"
          }
        }
      }
    },
    "/workspaces/permissions": {
      "get": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Listar permissões",
        "responses": {
          "200": {
            "description": "Lista de permissões"
          }
        }
      },
      "post": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Criar permissão",
        "responses": {
          "201": {
            "description": "Permissão criada"
          }
        }
      }
    },
    "/workspaces/permissions/{id}": {
      "put": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Atualizar permissão",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Permissão atualizada"
          }
        }
      },
      "delete": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Remover permissão",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Permissão removida"
          }
        }
      }
    },
    "/workspaces/roles": {
      "get": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Listar roles",
        "responses": {
          "200": {
            "description": "Lista de roles"
          }
        }
      },
      "post": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Criar role",
        "responses": {
          "201": {
            "description": "Role criado"
          }
        }
      }
    },
    "/workspaces/roles/{id}": {
      "put": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Atualizar role",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Role atualizado"
          }
        }
      },
      "delete": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Remover role",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Role removido"
          }
        }
      }
    },
    "/workspaces/permission-templates": {
      "get": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Listar templates de permissão",
        "responses": {
          "200": {
            "description": "Lista de templates"
          }
        }
      },
      "post": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Criar template de permissão",
        "responses": {
          "201": {
            "description": "Template criado"
          }
        }
      }
    },
    "/workspaces/permission-templates/{id}": {
      "put": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Atualizar template de permissão",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Template atualizado"
          }
        }
      },
      "delete": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Remover template de permissão",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Template removido"
          }
        }
      }
    },
    "/workspaces/settings": {
      "get": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Listar configurações",
        "responses": {
          "200": {
            "description": "Lista de configurações"
          }
        }
      },
      "post": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Criar configuração",
        "responses": {
          "201": {
            "description": "Configuração criada"
          }
        }
      }
    },
    "/workspaces/settings/{id}": {
      "put": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Atualizar configuração",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Configuração atualizada"
          }
        }
      },
      "delete": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Remover configuração",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Configuração removida"
          }
        }
      }
    },
    "/workspaces/settings-templates": {
      "get": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Listar templates de configuração",
        "responses": {
          "200": {
            "description": "Lista de templates"
          }
        }
      }
    },
    "/workspaces/settings-templates/apply": {
      "post": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Aplicar template de configuração",
        "responses": {
          "200": {
            "description": "Template aplicado"
          }
        }
      }
    },
    "/workspaces/themes": {
      "get": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Listar temas",
        "responses": {
          "200": {
            "description": "Lista de temas"
          }
        }
      },
      "post": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Criar tema",
        "responses": {
          "201": {
            "description": "Tema criado"
          }
        }
      }
    },
    "/workspaces/themes/{id}": {
      "put": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Atualizar tema",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Tema atualizado"
          }
        }
      },
      "delete": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Remover tema",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Tema removido"
          }
        }
      }
    },
    "/workspaces/themes/{id}/activate": {
      "put": {
        "tags": [
          "Workspaces"
        ],
        "summary": "Ativar tema",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Tema ativado"
          }
        }
      }
    },
    "/company/credits": {
      "get": {
        "tags": [
          "Credits"
        ],
        "summary": "Obter créditos da empresa",
        "responses": {
          "200": {
            "description": "Créditos da empresa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "balance": {
                      "type": "number"
                    },
                    "total_used": {
                      "type": "number"
                    },
                    "plan_monthly": {
                      "type": "number"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/agent/{id}/credits-spent": {
      "get": {
        "tags": [
          "Credits"
        ],
        "summary": "Obter créditos gastos pelo agente",
        "parameters": [
          {
            "$ref": "#/components/parameters/IdPath"
          }
        ],
        "responses": {
          "200": {
            "description": "Créditos gastos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "total": {
                      "type": "number"
                    },
                    "entries": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "ApiKeyAuth": {
        "type": "apiKey",
        "in": "header",
        "name": "x-api-key",
        "description": "Autenticação por chave de API."
      }
    },
    "parameters": {
      "IdPath": {
        "name": "id",
        "in": "path",
        "required": true,
        "schema": {
          "type": "string"
        },
        "description": "ID do recurso"
      },
      "Page": {
        "name": "page",
        "in": "query",
        "schema": {
          "type": "integer",
          "minimum": 1,
          "default": 1
        },
        "description": "Número da página"
      },
      "Limit": {
        "name": "limit",
        "in": "query",
        "schema": {
          "type": "integer",
          "minimum": 1,
          "maximum": 100,
          "default": 20
        },
        "description": "Itens por página"
      },
      "Sort": {
        "name": "sort",
        "in": "query",
        "schema": {
          "type": "string",
          "default": "created_at"
        },
        "description": "Campo para ordenação"
      },
      "Order": {
        "name": "order",
        "in": "query",
        "schema": {
          "type": "string",
          "enum": [
            "asc",
            "desc"
          ],
          "default": "desc"
        },
        "description": "Direção da ordenação"
      }
    },
    "schemas": {
      "Health": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string"
          },
          "timestamp": {
            "type": "string"
          },
          "company_id": {
            "type": "string"
          }
        }
      },
      "Pagination": {
        "type": "object",
        "properties": {
          "page": {
            "type": "integer"
          },
          "limit": {
            "type": "integer"
          },
          "total": {
            "type": "integer"
          },
          "total_pages": {
            "type": "integer"
          }
        }
      },
      "Agent": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "is_active": {
            "type": "boolean"
          },
          "is_default": {
            "type": "boolean"
          },
          "workflow_type": {
            "type": "string"
          },
          "language": {
            "type": "string"
          },
          "tone": {
            "type": "string"
          },
          "personality": {
            "type": "string"
          },
          "greeting_message": {
            "type": "string"
          },
          "custom_instructions": {
            "type": "string"
          },
          "business_context": {
            "type": "string"
          },
          "created_at": {
            "type": "string"
          },
          "updated_at": {
            "type": "string"
          }
        }
      },
      "AgentCreate": {
        "type": "object",
        "required": [
          "name"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "workflow_type": {
            "type": "string"
          },
          "language": {
            "type": "string"
          },
          "tone": {
            "type": "string"
          },
          "personality": {
            "type": "string"
          },
          "greeting_message": {
            "type": "string"
          }
        }
      },
      "AgentUpdate": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "is_active": {
            "type": "boolean"
          },
          "is_default": {
            "type": "boolean"
          }
        }
      },
      "AgentResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "data": {
            "type": "object",
            "properties": {
              "agent": {
                "$ref": "#/components/schemas/Agent"
              }
            }
          }
        }
      },
      "AgentsListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "data": {
            "type": "object",
            "properties": {
              "agents": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Agent"
                }
              },
              "pagination": {
                "$ref": "#/components/schemas/Pagination"
              }
            }
          }
        }
      },
      "Conversation": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "customer_name": {
            "type": "string"
          },
          "customer_phone": {
            "type": "string"
          },
          "customer_email": {
            "type": "string"
          },
          "channel": {
            "type": "string"
          },
          "status": {
            "type": "string"
          },
          "ai_mode": {
            "type": "string"
          },
          "agent_id": {
            "type": "string"
          },
          "created_at": {
            "type": "string"
          },
          "updated_at": {
            "type": "string"
          }
        }
      },
      "ConversationCreate": {
        "type": "object",
        "required": [
          "channel"
        ],
        "properties": {
          "channel": {
            "type": "string",
            "enum": [
              "whatsapp",
              "telegram",
              "email",
              "website"
            ]
          },
          "customer_name": {
            "type": "string"
          },
          "customer_phone": {
            "type": "string"
          },
          "customer_email": {
            "type": "string"
          },
          "agent_id": {
            "type": "string"
          }
        }
      },
      "ConversationUpdate": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string"
          },
          "ai_mode": {
            "type": "string"
          }
        }
      },
      "ConversationResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "data": {
            "type": "object",
            "properties": {
              "conversation": {
                "$ref": "#/components/schemas/Conversation"
              }
            }
          }
        }
      },
      "ConversationsListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "data": {
            "type": "object",
            "properties": {
              "conversations": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Conversation"
                }
              },
              "pagination": {
                "$ref": "#/components/schemas/Pagination"
              }
            }
          }
        }
      },
      "Message": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "content": {
            "type": "string"
          },
          "sender_type": {
            "type": "string",
            "enum": [
              "customer",
              "agent",
              "system",
              "ai"
            ]
          },
          "message_type": {
            "type": "string"
          },
          "created_at": {
            "type": "string"
          }
        }
      },
      "MessageCreate": {
        "type": "object",
        "required": [
          "content",
          "sender_type"
        ],
        "properties": {
          "content": {
            "type": "string"
          },
          "sender_type": {
            "type": "string",
            "enum": [
              "customer",
              "agent",
              "system",
              "ai"
            ]
          },
          "message_type": {
            "type": "string",
            "default": "text"
          }
        }
      },
      "MessageResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "data": {
            "type": "object",
            "properties": {
              "message": {
                "$ref": "#/components/schemas/Message"
              }
            }
          }
        }
      },
      "MessagesListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "data": {
            "type": "object",
            "properties": {
              "messages": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Message"
                }
              },
              "pagination": {
                "$ref": "#/components/schemas/Pagination"
              }
            }
          }
        }
      },
      "Appointment": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "start_time": {
            "type": "string"
          },
          "end_time": {
            "type": "string"
          },
          "status": {
            "type": "string"
          },
          "customer_name": {
            "type": "string"
          }
        }
      },
      "AppointmentCreate": {
        "type": "object",
        "required": [
          "title",
          "start_time",
          "end_time"
        ],
        "properties": {
          "title": {
            "type": "string"
          },
          "start_time": {
            "type": "string"
          },
          "end_time": {
            "type": "string"
          },
          "customer_name": {
            "type": "string"
          }
        }
      },
      "AppointmentUpdate": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string"
          },
          "start_time": {
            "type": "string"
          },
          "end_time": {
            "type": "string"
          },
          "status": {
            "type": "string"
          }
        }
      },
      "AppointmentResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "data": {
            "type": "object",
            "properties": {
              "appointment": {
                "$ref": "#/components/schemas/Appointment"
              }
            }
          }
        }
      },
      "AppointmentsListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "data": {
            "type": "object",
            "properties": {
              "appointments": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Appointment"
                }
              },
              "pagination": {
                "$ref": "#/components/schemas/Pagination"
              }
            }
          }
        }
      },
      "WorkspaceMinimal": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          }
        }
      },
      "WorkspaceMinimalResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "data": {
            "$ref": "#/components/schemas/WorkspaceMinimal"
          }
        }
      },
      "WorkspacesListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "data": {
            "type": "object",
            "properties": {
              "workspaces": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/WorkspaceMinimal"
                }
              },
              "pagination": {
                "$ref": "#/components/schemas/Pagination"
              }
            }
          }
        }
      }
    }
  }
}